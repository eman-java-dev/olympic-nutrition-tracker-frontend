<div class="nutrition-container">
  <h2 class="title">Nutrition Tracker</h2>

  <div *ngIf="ok" class="alert success">{{ ok }}</div>
  <div *ngIf="err" class="alert error">{{ err }}</div>

  <form (ngSubmit)="add()" class="nutrition-form">
    <div class="form-row">
      <div>
        <label>Calories (kcal)</label>
        <input type="number" [(ngModel)]="form.calories" name="calories" required />
      </div>
      <div>
        <label>Protein (g)</label>
        <input type="number" [(ngModel)]="form.protein" name="protein" required />
      </div>
      <div>
        <label>Carbs (g)</label>
        <input type="number" [(ngModel)]="form.carbs" name="carbs" required />
      </div>
      <div>
        <label>Fats (g)</label>
        <input type="number" [(ngModel)]="form.fats" name="fats" required />
      </div>
      <div>
        <label>Date</label>
        <input type="date" [(ngModel)]="form.date" name="date" />
      </div>
    </div>

    <button type="submit" class="btn-add"><span>+ Add Entry</span></button>
  </form>

  <!-- List -->
  <div class="nutrition-list" *ngIf="list.length">
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Date</th>
          <th>Calories</th>
          <th>Protein</th>
          <th>Carbs</th>
          <th>Fats</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let n of list; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ n.date | date:'shortDate' }}</td>
          <td>{{ n.calories }}</td>
          <td>{{ n.protein }}</td>
          <td>{{ n.carbs }}</td>
          <td>{{ n.fats }}</td>
          <td><button (click)="remove(n.id)" class="btn-delete">Delete</button></td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!loading && !list.length" class="empty">Aucun enregistrement nutritionnel pour le moment üçΩÔ∏è</div>

  <!-- ===== ŸÖÿÆÿ∑ÿ∑ ÿ¨ŸÖŸäŸÑ ŸàŸÖÿ™ŸÜÿßÿ≥ŸÇ ÿ®ÿßŸÑÿ£ŸÑŸàÿßŸÜ ===== -->
  <div class="chart-card" *ngIf="chartData.length">
    <h4 class="chart-title">Calories par jour</h4>

    <ngx-charts-bar-vertical
  [view]="chartView"
  [results]="chartData"
  [scheme]="colorScheme"
  [gradient]="gradient"
  [animations]="true"
  [xAxis]="showXAxis"
  [yAxis]="showYAxis"
  [showDataLabel]="showDataLabel"
  [legend]="legend"
  [xAxisLabel]="xAxisLabel"
  [yAxisLabel]="yAxisLabel"
  [roundEdges]="true"
  [yScaleMax]="yMax">
</ngx-charts-bar-vertical>


  </div>
</div>
